lms_project
Платформа для онлайн-обучения - LMS-система, в которой каждый желающий может размещать свои полезные материалы или курсы.

О проекте
Бэкенд-сервер, который возвращает на запросы эндпоинтов JSON-структуру. Используется СУБД Postgres

В проекте представлены приложения users, materials, subscription.
Реализованы модели (User, Payment, Course, Lesson, Subscription).
Для реализации CRUD используется Viewsets и Generic-классы.
Для работы контроллеров описаны сериализаторы (вложенные сериализаторы; описаны вычисляемые данные).
Настроена фильтрация для эндпоинта вывода списка платежей с возможностями:
менять порядок сортировки по дате оплаты,
фильтровать по курсу или уроку,
фильтровать по способу оплаты.
В проекте используется JWT-авторизация, каждый эндпоинт закрыт авторизацией.
Реализована группа 'модератор', описаны права доступа для объектов, реализована проверка прав.
Настроена валидация для сохранения уроков на отсутствие в материалах ссылок на сторонние ресурсы, кроме youtube.com.
Реализована пагинация для вывода всех уроков и курсов.
Написаны тесты для проверки моделей Lesson, Course, Subscription.
Подключен и настроен вывод документации для проекта. Для работы с документацией проекта использовалась библиотека drf-yasg.
Подключена возможность оплаты курсов через https://stripe.com/docs/api. Реализованы:
создание продукта;
создание цены;
создание сессии для получения ссылки на оплату;
проверка статуса платежа.
Реализованы задачи в Celery:
send_mail_about_updates - отложенная задача. При обновлении курса отправляется письмо пользователю, подписанному на курс.
check_last_login - периодическая задача, реализована с использованием celery-beat. Статус пользователей, которые не заходили в учетную запись больше месяца, меняется на неактивный.
Подготовка к работе
Чтобы запустить локальную копию, выполните следующие простые шаги:

Установка
Если вы используете Docker, то просто клонируйте проект используя ссылку из пункта "1" ниже и в терминале используйте команду:

docker-compose up -d --build
В противном случае следуйте шагам ниже.

Клонируйте проект
git@github.com:SSkeris/drf.git
Убедитесь, что вы получили из удаленного репозитория все ветки и переключились на ветку разработки develop
git checkout develop
Установите зависимости проекта (в случае, если не установились при клонировании)
pip install -r requirements.txt
или

python -m pip install -r requirements.txt
Создайте в корне проекта файл .env и заполните переменные среды в соответствии с желаемой конфигурацией, используя файл .env_sample
Примените миграции
python manage.py migrate
Запуск приложения
Для того, чтобы запустить проект, выполните команду
python3 manage.py runserver
Работу каждого эндпоинта необходимо проверять с помощью Postman.
Запуск задач в Celery
В проекте реализованы отложенные и периодические задачи.

Для запуска отложенной задачи, выполните команду
celery -A config worker -l INFO
Для запуска периодической задачи, выполните команды
   celery -A config worker --loglevel=info
   celery -A config beat -l INFO -S django
для запуска на Windows может потребоваться установка evenlet или gevent

    celery -A config worker -l info -P "имя библиотеки: eventlet/gevent"
    celery -A config beat -l INFO -S django
Тестирование
Для запуска тестов, находясь в виртуальном окружении проекта, выполните команды

   coverage run --source='.' manage.py test
и

   coverage report
Для генерации HTML-отчета в целях оценки покрытия тестами выполните команду

   coverage html